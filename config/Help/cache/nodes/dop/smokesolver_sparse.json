{"type": "root", "attrs": {"type": "node", "context": "dop", "internal": "smokesolver_sparse", "icon": "DOP/smokesolver_sparse", "tags": "pyro", "since": "18.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Smoke Solver (Sparse)"], "extent": [112, 138]}, {"type": "summary", "indent": 0, "text": ["Performs a sparse smoke simulation on the given object. This is a slightly\nlower-level solver that is the basis for the sparse pyro solver."], "extent": [138, 286]}, {"type": "para", "indent": 0, "text": ["See ", {"scheme": null, "value": "/pyro/pyro_look", "type": "link", "text": ["Pyro look development"], "fullpath": "/pyro/pyro_look.html"}, " for information on using the\nparameters to achieve different flame and smoke looks. "], "extent": [286, 416]}, {"type": "para", "indent": 0, "text": ["The Smoke Solver is able to perform the basic steps required for a smoke\nsimulation. ", {"scheme": "Node", "value": "/nodes/dop/pyrosolver_sparse", "type": "link", "text": ["Pyro Solver (Sparse)"], "fullpath": "/nodes/dop/pyrosolver_sparse.html"}, " extends the\nfunctionality of this solver by adding flame simulation along with extra shaping\ncontrols."], "extent": [416, 655]}, {"level": 2, "id": "setup", "container": true, "type": "h", "indent": 0, "text": ["Setting Up"], "extent": [655, 680], "body": [{"type": "para", "indent": 0, "text": ["The essential building blocks of a smoke simulation are the object, solver, and\nsourcing. The ", {"scheme": "Node", "value": "/nodes/dop/smokeobject_sparse", "type": "link", "text": ["Smoke Object (Sparse)"], "fullpath": "/nodes/dop/smokeobject_sparse.html"}, " node creates\na dynamic object containing the required fields, which are then evolved by the\nsolver as the simulation proceeds. The simplest smoke simulation needs the\nfollowing data:"], "extent": [680, 1010]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "code", "text": ["density"]}, " scalar field that contains where and how much smoke is present;"], "extent": [1010, 1086]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "code", "text": ["temperature"]}, " scalar field that\u2019s used for buoyancy calculations;"], "extent": [1086, 1154]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "code", "text": ["vel"]}, " vector field that captures the instantaneous motion of the smoke."], "extent": [1154, 1229]}], "container": true}, {"type": "para", "indent": 0, "text": ["This solver takes care of ensuring these fields change in a manner consistent\nwith smoke, but sourcing is responsible for injecting these quantities through\nthe course of the simulation. For example, you may want to continuously add to\n", {"type": "code", "text": ["density"]}, " at the soot source or ", {"type": "code", "text": ["temperature"]}, " to cause hot regions to rise. See\n", {"scheme": null, "value": "/dyno/fluid_sourcing", "type": "link", "text": ["pyro sourcing"], "fullpath": "/dyno/fluid_sourcing.html"}, " for more information."], "extent": [1229, 1605]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1605, 1611], "body": [{"type": "para", "indent": 4, "text": ["Tools under the ", {"type": "ui", "text": ["Sparse Pyro FX"]}, " shelf can be used to create setups\n    involving the pyro solver."], "extent": [1611, 1717]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 2, "id": "sparse", "container": true, "type": "h", "indent": 0, "text": ["Sparsity"], "extent": [1717, 1741], "body": [{"type": "para", "indent": 0, "text": ["By default, this solver operates in ", {"type": "em", "text": ["sparse"]}, " mode; that is, the needed\ncalculations are performed only in the areas of interest, as governed by the\n", {"type": "code", "text": ["active"]}, " field. This region is built by looking at the ", {"type": "ui", "text": ["Reference Fields"]}, "\nparameter under the ", {"type": "ui", "text": ["Resizing"]}, " subtab of the ", {"type": "ui", "text": ["Advanced"]}, " tab: positive areas\nof the specified fields are flagged as ", {"type": "em", "text": ["active"]}, ". This intermediate active region\nis then dilated to provide a buffer for smoke to expand into. With the\n", {"type": "ui", "text": ["Reference Fields"]}, " set to ", {"type": "code", "text": ["density"]}, ", for example, the solver will run its\noperations near areas which have some soot, thereby concentrating the\ncomputational effort to the smoke\u2019s visible region."], "extent": [1741, 2397]}, {"type": "para", "indent": 0, "text": ["Inactive areas in sparse mode are treated as vacuum that smoke is free to move\ninto. As such, if there are two puffs of smoke blowing at each other, they will\nbe completely invisible to one another until they come sufficiently close for\ntheir disjoint active regions to merge."], "extent": [2397, 2675]}, {"type": "para", "indent": 0, "text": ["When ", {"type": "ui", "text": ["Enable Sparse Solving"]}, " is disabled under the aforementioned tab, the\nsolver will work in ", {"type": "em", "text": ["dense"]}, " mode, performing a full global solve everywhere\nwithin the domain. With the previous example involving two puffs of smoke, they\nwill be immediately aware of each other\u2019s presence. However, dense mode can be\nsubstantially slower in some cases."], "extent": [2675, 3024]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [3024, 3029], "body": [{"type": "para", "indent": 4, "text": ["You can enable ", {"type": "ui", "text": ["Active Region"]}, " visualization under the ", {"type": "ui", "text": ["Guides"]}, " tab of\n    the ", {"scheme": "Node", "value": "/nodes/dop/smokeobject_sparse", "type": "link", "text": ["smoke object"], "fullpath": "/nodes/dop/smokeobject_sparse.html"}, " to see the active simulation\n    areas."], "extent": [3029, 3200]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [3200, 3208], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Objects"], "extent": [3208, 3218], "body": [{"type": "para", "indent": 4, "text": ["A ", {"scheme": "Node", "value": "/nodes/dop/smokeobject_sparse", "type": "link", "text": ["smoke object"], "fullpath": "/nodes/dop/smokeobject_sparse.html"}, " to work on."], "extent": [3234, 3296]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [3296, 3306], "body": [{"type": "para", "indent": 8, "text": ["When working in sparse mode, ", {"type": "ui", "text": ["Enable Sparse Solving"]}, " must be enabled\n        on the smoke object."], "extent": [3306, 3415]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "input0"}}, {"type": "dt", "indent": 0, "text": ["Advection"], "extent": [3415, 3426], "body": [{"type": "para", "indent": 4, "text": ["Nodes attached to this input will be able to use the smoke\u2019s accurate\n    velocity field. The ", {"scheme": "Node", "value": "/nodes/dop/gasadvect", "type": "link", "text": ["Gas Advect"], "fullpath": "/nodes/dop/gasadvect.html"}, " node can be hooked up,\n    for instance, to advect the points of an attached geometry data along with\n    the smoke."], "extent": [3442, 3690]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [3690, 3700], "body": [{"type": "para", "indent": 8, "text": ["It is not safe to modify the velocity through this input; use the\n        ", {"type": "ui", "text": ["Sourcing"]}, " or ", {"type": "ui", "text": ["Forces"]}, " inputs instead."], "extent": [3700, 3826]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "input1"}}, {"type": "dt", "indent": 0, "text": ["Sourcing"], "extent": [3826, 3836], "body": [{"type": "para", "indent": 4, "text": ["This input should be used to modify the simulation fields, by sourcing with\n    a ", {"scheme": "Node", "value": "/nodes/dop/volumesource", "type": "link", "text": ["Volume Source"], "fullpath": "/nodes/dop/volumesource.html"}, ", for example. It is important to\n    perform any sourcing that affects the active region in sparse mode through\n    this input."], "extent": [3852, 4105]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [4105, 4115], "body": [{"type": "para", "indent": 8, "text": ["The ", {"type": "code", "text": ["active"]}, " field at this point is not up-to-date; thus, if you want to\n        perform an operation that can be done sparsely, it is best to use the\n        ", {"type": "ui", "text": ["Forces"]}, " input."], "extent": [4115, 4301]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "input2"}}, {"type": "dt", "indent": 0, "text": ["Forces"], "extent": [4301, 4309], "body": [{"type": "para", "indent": 4, "text": ["Microsolvers attached to this input will be run before the final pressure\n    projection. At this point, the ", {"type": "code", "text": ["active"]}, " field can be used as a stencil for\n    DOPs that support it."], "extent": [4325, 4509]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [4509, 4519], "body": [{"type": "para", "indent": 8, "text": ["Before the nodes attached to this input are executed, the ", {"type": "code", "text": ["active"]}, " field\n        is updated to account for any operations that were performed in the\n        ", {"type": "ui", "text": ["Sourcing"]}, " input."], "extent": [4519, 4705]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "input3"}}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [4705, 4717], "body": [{"level": 2, "id": "simtab", "container": true, "type": "h", "indent": 0, "text": ["Simulation"], "extent": [4717, 4744], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Calculate Speed Field"], "extent": [4744, 4768], "body": [{"type": "para", "indent": 4, "text": ["When enabled, the ", {"type": "code", "text": ["speed"]}, " field is computed at each time step. This field\n    stores lengths of the velocity vectors and can be used as the control field\n    to attenuate the strength of attached microsolvers and shape operators. For\n    example, you can weaken the effect of turbulence in areas with less motion\n    by using ", {"type": "code", "text": ["speed"]}, " as its control field."], "extent": [4787, 5148]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [5148, 5158], "body": [{"type": "para", "indent": 8, "text": ["Speeds are calculated after advection and before any forces are applied."], "extent": [5158, 5240]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "calcspeed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Time Scale"], "extent": [5240, 5252], "body": [{"type": "para", "indent": 4, "text": ["A scaling factor for time inside this solver. 1 is normal speed, greater\n    than 1 speeds up the simulation, while less than 1 slows it down."], "extent": [5271, 5423]}, {"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 4, "role": "item", "extent": [5423, 5435], "body": [], "container": true, "attrs": {"src": "/videos/pyro/pyro_timescale.mp4"}}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "timescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Viscosity"], "extent": [5482, 5493], "body": [{"type": "para", "indent": 4, "text": ["A blur factor on the velocity field. A value of 0 allows adjacent voxels to\n    move in different directions without resistance, creating a more chaotic,\n    turbulent look. Higher values of this parameter result in a more coherent\n    velocity field, creating a more flowing look."], "extent": [5512, 5803]}, {"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 4, "role": "item", "extent": [5803, 5815], "body": [], "container": true, "attrs": {"src": "/videos/pyro/pyro_viscosity.mp4"}}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "viscosity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Wind"], "extent": [5862, 5868], "body": [{"type": "para", "indent": 4, "text": ["Velocity of passive wind. This force is treated separately by advection, so\n    the simulation velocity field will not reflect the presence of ", {"type": "ui", "text": ["Wind"]}, "."], "extent": [5882, 6040]}], "container": true, "attrs": {"id": "wind"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": "advreflect", "container": true, "type": "h", "indent": 0, "text": ["Advection-Reflection"], "extent": [6040, 6082], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Advection-Reflection"], "extent": [6082, 6105], "body": [{"type": "para", "indent": 4, "text": ["Advection-Reflection attempts to inject energy lost due to pressure\n    projection back into the simulation. Enabling this option may exhibit better\n    vortex retainment in the flow."], "extent": [6130, 6323]}, {"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 4, "role": "item", "extent": [6323, 6335], "body": [], "container": true, "attrs": {"src": "/videos/pyro/pyro_advection_reflection.mp4"}}], "container": true, "role": "item_group"}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Disabled"], "extent": [6393, 6407], "body": [{"type": "para", "indent": 8, "text": ["No reflection is performed; this is the recommended setting for\n        simulations that involve non-zero goal ", {"type": "code", "text": ["divergence"]}, ", such as explosions."], "extent": [6407, 6560]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Single-Project"], "extent": [6560, 6580], "body": [{"type": "para", "indent": 8, "text": ["Performs a single pressure projection per timestep and adds the removed\n        velocity components back at the next step. This option is marginally\n        slower than ", {"type": "ui", "text": ["Disabled"]}, ", but requires an extra vector field to be\n        carried between timesteps."], "extent": [6580, 6856]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Double-Project"], "extent": [6856, 6876], "body": [{"type": "para", "indent": 8, "text": ["Performs two pressure projections and velocity advection passes per\n        timestep. This option is a lot slower than ", {"type": "ui", "text": ["Single-Project"]}, ", but may\n        yield better results and stability."], "extent": [6876, 7076]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "adv_vel_reflect"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reflection Amount"], "extent": [7076, 7095], "body": [{"type": "para", "indent": 4, "text": ["Fraction of the projected velocities to re-inject when\n    ", {"type": "ui", "text": ["Advection-Reflection"]}, " is not set to ", {"type": "ui", "text": ["Disabled"]}, ". Values near 1 will do a\n    better job of conserving energy, but may result in instabilities."], "extent": [7126, 7341]}, {"type": "para", "indent": 4, "text": ["The following video shows ", {"type": "ui", "text": ["Single-Project"]}, " mode."], "extent": [7341, 7396]}, {"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 4, "role": "item", "extent": [7396, 7408], "body": [], "container": true, "attrs": {"src": "/videos/pyro/pyro_single_project.mp4"}}], "container": true, "role": "item_group"}, {"type": "para", "indent": 4, "text": ["The following video shows ", {"type": "ui", "text": ["Double-Project"]}, " mode."], "extent": [7464, 7519]}, {"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 4, "role": "item", "extent": [7519, 7531], "body": [], "container": true, "attrs": {"src": "/videos/pyro/pyro_double_project.mp4                "}}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "adv_vel_reflectamount"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Temperature"], "extent": [7607, 7627], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Temperature Diffusion"], "extent": [7627, 7651], "body": [{"type": "para", "indent": 4, "text": ["A blur factor on the temperature field. Higher values diffuse the\n    temperature out further, emulating the spread of heat from hotter to colder\n    areas."], "extent": [7674, 7840]}, {"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 4, "role": "item", "extent": [7840, 7852], "body": [], "container": true, "attrs": {"src": "/videos/pyro/pyro_temperature_diffusion.mp4"}}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "tempdiffusion"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cooling Rate"], "extent": [7911, 7925], "body": [{"type": "para", "indent": 4, "text": ["How fast the temperature field cools to zero."], "extent": [7946, 7997]}, {"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 4, "role": "item", "extent": [7997, 8009], "body": [], "container": true, "attrs": {"src": "/videos/pyro/pyro_cooling_rate.mp4"}}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "tempcooling"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ambient Temp (K)"], "extent": [8059, 8077], "body": [{"type": "para", "indent": 4, "text": ["Temperature corresponding to value of 0 in the ", {"type": "code", "text": ["temperature"]}, " field (in\n    Kelvin). This represents the ambient temperature of the environment."], "extent": [8099, 8248]}], "container": true, "attrs": {"id": "temperature0"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reference Temp (K)"], "extent": [8248, 8268], "body": [{"type": "para", "indent": 4, "text": ["Temperature corresponding to value of 1 in the ", {"type": "code", "text": ["temperature"]}, " field (in\n    Kelvin). The temperature range is used to calculate strength of the buoyancy\n    force."], "extent": [8290, 8458]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [8458, 8468], "body": [{"type": "para", "indent": 8, "text": ["In general, value of ", {"type": "code", "text": ["T"]}, " in the ", {"type": "code", "text": ["temperature"]}, " field corresponds to a\n        temperature of\n        ", {"type": "code", "text": ["Ambient Temp (K) + T * (Reference Temp (K) - Ambient Temp (K))"]}, "."], "extent": [8468, 8643]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "temperature1"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Buoyancy Scale"], "extent": [8643, 8659], "body": [{"type": "para", "indent": 4, "text": ["Hot gas expands, causing it to rise due to lowered density. Acceleration due\n    to buoyancy is calculated using values of the ambient and reference\n    temperatures, as well as the ", {"type": "ui", "text": ["Gravity"]}, " settings. Value of this parameter\n    is used as a multiplier for the buoyancy force."], "extent": [8681, 8970]}, {"type": "video_group", "body": [{"ext": null, "type": "video", "indent": 4, "role": "item", "extent": [8970, 8982], "body": [], "container": true, "attrs": {"src": "/videos/pyro/pyro_buoyancy.mp4"}}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "buoyancylift"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 4, "id": "grav", "container": true, "type": "h", "indent": 0, "text": ["Gravity"], "extent": [9028, 9053], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Gravity Acceleration"], "extent": [9053, 9076], "body": [{"type": "para", "indent": 4, "text": ["Acceleration due to gravity. Stronger gravity results in stronger buoyancy\n    forces."], "extent": [9095, 9187]}], "container": true, "attrs": {"id": "gravaccel"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Gravity Direction"], "extent": [9187, 9206], "body": [{"type": "para", "indent": 4, "text": ["The direction in which gravity pulls. Hotter gas will tend to rise in the\n    opposite direction."], "extent": [9223, 9326]}], "container": true, "attrs": {"id": "gravdir"}, "role": "item"}], "container": true, "role": "item_group"}]}]}]}, {"level": 2, "id": "advancedtab", "container": true, "type": "h", "indent": 0, "text": ["Advanced"], "extent": [9326, 9355], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Minimal Solve"], "extent": [9355, 9371], "body": [{"type": "para", "indent": 4, "text": ["Turns off certain parts of the evaluation network to facilitate fast OpenCL\n    solving that avoids data copying between main and video memory."], "extent": [9393, 9542]}, {"type": "warning_group", "body": [{"type": "warning", "indent": 4, "role": "item", "extent": [9542, 9555], "body": [{"type": "para", "indent": 8, "text": ["This is a utility parameter used by the\n        ", {"scheme": "Node", "value": "/nodes/sop/pyrosolver", "type": "link", "text": ["Pyro Solver SOP"], "fullpath": "/nodes/sop/pyrosolver.html"}, " to implement\n        ", {"type": "ui", "text": ["Minimal OpenCL Solve"]}, "; however, that feature relies on several moving\n        parts to work correctly. As such, you should not unlock or change value\n        of this parameter on the\n        ", {"scheme": "Node", "value": "/nodes/dop/smokesolver_sparse", "type": "link", "text": ["Smoke Solver (Sparse)"], "fullpath": "/nodes/dop/smokesolver_sparse.html"}, " or\n        ", {"scheme": "Node", "value": "/nodes/dop/pyrosolver_sparse", "type": "link", "text": ["Pyro Solver (Sparse)"], "fullpath": "/nodes/dop/pyrosolver_sparse.html"}, " operators."], "extent": [9555, 9989]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "minimalsolve"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use OpenCL"], "extent": [9989, 10001], "body": [{"type": "para", "indent": 4, "text": ["Use the OpenCL device to accelerate computations."], "extent": [10017, 10072]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [10072, 10082], "body": [{"type": "para", "indent": 8, "text": ["OpenCL acceleration is currently only supported in dense mode (when\n        ", {"type": "ui", "text": ["Enable Sparse Solving"]}, " is disabled)."], "extent": [10082, 10207]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "opencl"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Substeps"], "extent": [10207, 10221], "body": [{"type": "para", "indent": 4, "text": ["The solver will take at least this many substeps per frame. If you have\n    unusual forces, you may want to increase this parameter for better\n    stability. Increasing this parameter usually makes the simulation run\n    noticeably slower."], "extent": [10246, 10491]}], "container": true, "attrs": {"id": "minimumsubsteps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Substeps"], "extent": [10491, 10505], "body": [{"type": "para", "indent": 4, "text": ["The solver will take at most this many substeps per frame. "], "extent": [10523, 10588]}], "container": true, "attrs": {"id": "substeps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["CFL Condition"], "extent": [10588, 10603], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Max Substeps"]}, " is greater than 1, the solver uses this parameter to\n    determine the number of substeps. The condition is that no substep can allow\n    objects to interpenetrate by more than this many voxels. Higher values let\n    the solver take larger substeps, possibly letting smoke pass through\n    colliders."], "extent": [10620, 10948]}], "container": true, "attrs": {"id": "cflcond"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Quantize to Max Substeps"], "extent": [10948, 10974], "body": [{"type": "para", "indent": 4, "text": ["When enabled, all substeps will divide the frame by ", {"type": "ui", "text": ["Max Substeps"]}, ". For\n    example, if ", {"type": "ui", "text": ["Max Substeps"]}, " is set to 4, but the ", {"type": "ui", "text": ["CFL Condition"]}, " only\n    requires 3 substeps, the solver will take frame steps 0.25, 0.5, and 0.25.\n    This option can be useful for re-using input geometry that has been cached\n    to file at increments of 1/", {"type": "ui", "text": ["Max Substeps"]}, "."], "extent": [10992, 11355]}], "container": true, "attrs": {"id": "quantize"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Frames Before Solve"], "extent": [11355, 11376], "body": [{"type": "para", "indent": 4, "text": ["Delays the actual simulation this many frames after the object creation.\n    Nodes attached to the ", {"type": "ui", "text": ["Sourcing"]}, " input will still be executed. This may be\n    needed if some solve nodes can\u2019t be processed before certain initial\n    conditions have been met."], "extent": [11403, 11665]}], "container": true, "attrs": {"id": "framesbeforesolve"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Single V-Cycle for Pressure Projection"], "extent": [11665, 11705], "body": [{"type": "para", "indent": 4, "text": ["When enabled, pressure projection will be done using a much cheaper (but\n    less accurate) method."], "extent": [11727, 11832]}], "container": true, "attrs": {"id": "singlevcycle"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Resizing"], "extent": [11832, 11849], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Resize in Full Tiles"], "extent": [11849, 11872], "body": [{"type": "para", "indent": 4, "text": ["When enabled, size changes to the fields will be done in increments of 16\n    voxels. This is marginally more efficient, but the resultant fields will be\n    larger than necessary."], "extent": [11898, 12084]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [12084, 12094], "body": [{"type": "para", "indent": 8, "text": ["Resizing is always done in full tiles when ", {"type": "ui", "text": ["Enable Sparse Solving"]}, " is\n        turned on."], "extent": [12094, 12194]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "resize_fulltiles"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reference Fields"], "extent": [12194, 12212], "body": [{"type": "para", "indent": 4, "text": ["List of fields that determine size of the simulation container. Resizing is\n    done by first computing the bounding box around all voxels of ", {"type": "ui", "text": ["Reference\n    Fields"]}, " that have a positive value, then expanding this intermediate region\n    by ", {"type": "ui", "text": ["Padding"]}, " on all sides. This list of fields is also used to build the\n    active region in sparse mode."], "extent": [12235, 12588]}], "container": true, "attrs": {"id": "resize_fields"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Padding"], "extent": [12588, 12597], "body": [{"type": "para", "indent": 4, "text": ["Amount of padding to add to the simulation region around the ", {"type": "ui", "text": ["Reference\n    Fields"]}, ". ", {"type": "ui", "text": ["Padding"]}, " should be as small as possible, but large enough to\n    ensure that moving smoke does not leave the container within a timestep."], "extent": [12621, 12854]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [12854, 12864], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Enable Sparse Solving"]}, " is turned on, ", {"type": "ui", "text": ["Padding"]}, " also controls\n        size of the buffer built into the active region."], "extent": [12864, 13001]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "resize_padding"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Extra Fields"], "extent": [13001, 13015], "body": [{"type": "para", "indent": 4, "text": ["By default, the smoke solver will resize ", {"type": "code", "text": ["density"]}, ", ", {"type": "code", "text": ["temperature"]}, ",\n    ", {"type": "code", "text": ["divergence"]}, ", ", {"type": "code", "text": ["active"]}, ", ", {"type": "code", "text": ["vel"]}, ", ", {"type": "code", "text": ["collisionvel"]}, ", and ", {"type": "code", "text": ["flame"]}, " (for pyro\n    only). Additional fields may be resized by specifying them here."], "extent": [13043, 13257]}], "container": true, "attrs": {"id": "resize_extrafields"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Sparsity"], "extent": [13257, 13275], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Sparse Solving"], "extent": [13275, 13299], "body": [{"type": "para", "indent": 4, "text": ["Puts the solver in sparse mode, allowing it to perform its computations only\n    in relevant areas."], "extent": [13323, 13428]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [13428, 13438], "body": [{"type": "para", "indent": 8, "text": [{"type": "ui", "text": ["Enable Sparse Solving"]}, " must also be enabled on the smoke object for\n        sparse mode to work correctly."], "extent": [13438, 13557]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "sparse_dosolve"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reset Rule"], "extent": [13557, 13569], "body": [{"type": "para", "indent": 4, "text": ["Rule that determines where the fields specified in ", {"type": "ui", "text": ["Fields to Reset"]}, " are\n    modified."], "extent": [13595, 13689]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Disabled"], "extent": [13689, 13703], "body": [{"type": "para", "indent": 8, "text": ["Fields are not modified anywhere."], "extent": [13703, 13745]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Newly Occupied"], "extent": [13745, 13765], "body": [{"type": "para", "indent": 8, "text": ["Fields are reset in the areas that were previously inactive but are now\n        active."], "extent": [13765, 13861]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Newly Deoccupied"], "extent": [13861, 13883], "body": [{"type": "para", "indent": 8, "text": ["Fields are reset in the areas that were previously active but are now\n        inactive."], "extent": [13883, 13979]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Newly Occupied or Deoccupied"], "extent": [13979, 14013], "body": [{"type": "para", "indent": 8, "text": ["Fields are reset in the areas that changed their activity status in\n        either direction."], "extent": [14013, 14116]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "sparse_resetrule"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Fields to Reset"], "extent": [14116, 14133], "body": [{"type": "para", "indent": 4, "text": ["List of fields to reset, based on the ", {"type": "ui", "text": ["Reset Rule"]}, ". In the regions where\n    they are modified, these fields are set to their initial value."], "extent": [14161, 14309]}], "container": true, "attrs": {"id": "sparse_resetfields"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Extrapolate Velocity into New Tiles"], "extent": [14309, 14346], "body": [{"type": "para", "indent": 4, "text": ["When this parameter is enabled, newly-activated areas inherit their\n    velocities from nearby active regions. This can help reduce tile artifacts\n    that may appear on the smoke surface if the ", {"type": "ui", "text": ["Padding"]}, " is not large enough."], "extent": [14372, 14605]}, {"type": "para", "indent": 4, "text": [{"type": "ui", "text": ["Falloff"]}, " and ", {"type": "ui", "text": ["Blendwidth"]}, " parameters determine how new velocities are\n    blended with the background field value (as set by ", {"type": "ui", "text": ["Wind Tunnel Direction"]}, "\n    on the ", {"scheme": "Node", "value": "/nodes/dop/smokeobject_sparse", "type": "link", "text": ["Smoke Object (Sparse)"], "fullpath": "/nodes/dop/smokeobject_sparse.html"}, " node). You should\n    set ", {"type": "ui", "text": ["Blendwidth"]}, " to reflect the interpolation band around the active\n    region: valid boundary velocities will be blended with the background value\n    in a band of this thickness. If the ", {"type": "ui", "text": ["Blendwidth"]}, " is set too small, then\n    extrapolation will not be effective at removing tile artifacts; however, if\n    this value is set too large, then smoke will be accelerated outwards. If\n    this happens, decreasing the ", {"type": "ui", "text": ["Blendwidth"]}, " or increasing ", {"type": "ui", "text": ["Falloff"]}, " (to a\n    value on the order of simulation speeds) can help mitigate the problem."], "extent": [14605, 15393]}], "container": true, "attrs": {"id": "sparse_streakvel"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Falloff"], "extent": [15393, 15402], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Extrapolate Velocity into New Tiles"]}, " is enabled, valid velocity\n    values are extrapolated into newly-activated nearby tiles. This parameter\n    sets a minimum blending rate towards the background field value (as set by\n    the ", {"type": "ui", "text": ["Wind Tunnel Direction"]}, " on the\n    ", {"scheme": "Node", "value": "/nodes/dop/smokeobject_sparse", "type": "link", "text": ["Smoke Object (Sparse)"], "fullpath": "/nodes/dop/smokeobject_sparse.html"}, " node). Increase this\n    parameter if the smoke gets pulled outwards at the desired ", {"type": "ui", "text": ["Blendwidth"]}, "."], "extent": [15432, 15863]}], "container": true, "attrs": {"id": "sparse_streakfalloff"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blendwidth"], "extent": [15863, 15875], "body": [{"type": "para", "indent": 4, "text": ["Controls the size of the interpolation band around the active region when\n    ", {"type": "ui", "text": ["Extrapolate Velocity into New Active Tiles"]}, " is enabled. Newly-activated\n    velocities in a band of this size will interpolate valid values towards the\n    background value (as set by ", {"type": "ui", "text": ["Wind Tunnel Direction"]}, "). Increasing this\n    parameter can help reduce tile artifacts that can appear when ", {"type": "ui", "text": ["Padding"]}, " is\n    small."], "extent": [15903, 16309]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [16309, 16319], "body": [{"type": "para", "indent": 8, "text": ["The actual blendwidth is equal to the product of this parameter and\n        ", {"type": "ui", "text": ["Padding"]}, ". Thus, if you change ", {"type": "ui", "text": ["Padding"]}, " by a significant amount,\n        you may need to adjust the value of this parameter as well."], "extent": [16319, 16542]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "sparse_streakwidth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Expand by Velocity"], "extent": [16542, 16562], "body": [{"type": "para", "indent": 4, "text": ["When enabled, the active simulation region will take the motion of the gas\n    into account. This will result in adaptive padding that is larger where the\n    fluid is exiting at a faster rate. If this is disabled, the active region is\n    expanded uniformly in all directions."], "extent": [16590, 16873]}], "container": true, "attrs": {"id": "sparse_directional"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Padding"], "extent": [16873, 16886], "body": [{"type": "para", "indent": 4, "text": ["The minimum padding around the smoke when ", {"type": "ui", "text": ["Expand by Velocity"]}, " is turned\n    on."], "extent": [16910, 16998]}], "container": true, "attrs": {"id": "sparse_padding"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Padding"], "extent": [16998, 17011], "body": [{"type": "para", "indent": 4, "text": ["The maximum padding around the smoke when ", {"type": "ui", "text": ["Expand by Velocity"]}, " is turned\n    on. You can enable this to limit the amount of internal expansion when using\n    ", {"type": "ui", "text": ["Expand by Velocity"]}, "."], "extent": [17038, 17227]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [17227, 17237], "body": [{"type": "para", "indent": 8, "text": ["If ", {"type": "ui", "text": ["Max Padding"]}, " is less than resizing ", {"type": "ui", "text": ["Padding"]}, ", then ", {"type": "ui", "text": ["Padding"]}, "\n        will be internally clamped to ", {"type": "ui", "text": ["Max Padding"]}, " (when enabled). This is\n        done to avoid having layers of inactive tiles at the boundaries."], "extent": [17237, 17468]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "sparse_maxpadding"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Expansion Rate"], "extent": [17468, 17484], "body": [{"type": "para", "indent": 4, "text": ["Controls size of the adaptive padding for the sparse active region, when\n    ", {"type": "ui", "text": ["Expand by Velocity"]}, " is enabled. The active region will include more tiles\n    (and the smoke will have a bugger buffer to move into) when this parameter\n    is set to a larger value."], "extent": [17508, 17776]}], "container": true, "attrs": {"id": "sparse_dirrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Tangential Rate"], "extent": [17776, 17793], "body": [{"type": "para", "indent": 4, "text": ["This parameter impacts the shape of the sparse active region when using\n    ", {"type": "ui", "text": ["Expand by Velocity"]}, ". Smaller values of this parameter will permit sharper\n    kinks in the active region. This can reduce the number of active simulation\n    tiles, but may also negatively impact the motion of the fluid."], "extent": [17818, 18123]}], "container": true, "attrs": {"id": "sparse_tangrate"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["External Forces"], "extent": [18123, 18147], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Scaled Forces"], "extent": [18147, 18163], "body": [{"type": "para", "indent": 4, "text": ["A list of forces to scale by the value of the ", {"type": "code", "text": ["density"]}, " field at each voxel."], "extent": [18186, 18268]}], "container": true, "attrs": {"id": "forces_scaled"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Absolute Forces"], "extent": [18268, 18285], "body": [{"type": "para", "indent": 4, "text": ["A list of forces to apply uniformly to all voxels (ignoring their ", {"type": "code", "text": ["density"]}, "\n    value)."], "extent": [18310, 18403]}], "container": true, "attrs": {"id": "forces_absolute"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Advection"], "extent": [18403, 18421], "body": [{"level": 4, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Field Advection"], "extent": [18421, 18448], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Advection Scheme"], "extent": [18448, 18467], "body": [{"type": "para", "indent": 4, "text": ["The algorithm used to perform advection. ", {"type": "ui", "text": ["Semi-Lagrangian"]}, " is the most\n    basic: it simply traces trajectories through the ", {"type": "ui", "text": ["Velocity Field"]}, " once to\n    update the ", {"type": "ui", "text": ["Field"]}, " values. ", {"type": "ui", "text": ["Modified MacCormack"]}, " carries out an extra\n    tracing step to approximate and compensate for the introduced error; as a\n    result, sharp features of the original field can be better preserved.\n    ", {"type": "ui", "text": ["BFECC"]}, " performs yet another trace to predict the motion of the estimated\n    error, producing the best results at the highest computational cost."], "extent": [18487, 19028]}], "container": true, "attrs": {"id": "adv_scheme"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Clamp Values"], "extent": [19028, 19042], "body": [{"type": "para", "indent": 4, "text": ["The error correction steps of ", {"type": "ui", "text": ["Modified MacCormack"]}, " and ", {"type": "ui", "text": ["BFECC"]}, "\n    advection may introduce final voxel values that lie outside the range of the\n    original field: this can create negative densities or large velocities, for\n    example. When such values are detected, the final field value depends on the\n    setting of this parameter."], "extent": [19067, 19413]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": [{"type": "ui", "text": ["None"]}], "extent": [19413, 19427], "body": [{"type": "para", "indent": 8, "text": ["No clamping is performed."], "extent": [19427, 19461]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "ui", "text": ["Clamp"]}], "extent": [19461, 19476], "body": [{"type": "para", "indent": 8, "text": ["Clamps the value to ensure it lies in the range that would have been\n        seen by ", {"type": "ui", "text": ["Semi-Lagrangian"]}, " advection."], "extent": [19476, 19600]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "ui", "text": ["Revert"]}], "extent": [19600, 19616], "body": [{"type": "para", "indent": 8, "text": ["Falls back to the value predicted by ", {"type": "ui", "text": ["Semi-Lagrangian"]}, " advection."], "extent": [19616, 19693]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "adv_clampvalues"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blend"], "extent": [19693, 19700], "body": [{"type": "para", "indent": 4, "text": ["Apply a smooth blend between non-clamped and clamped values as the advected\n    field approaches the clamping limit. Particularly with the ", {"type": "ui", "text": ["Revert"]}, "\n    option, applying a small amount of ", {"type": "ui", "text": ["Blend"]}, " (0.05-0.1) can reduce grid\n    artifacts in the advected field."], "extent": [19724, 19992]}], "container": true, "attrs": {"id": "adv_blendwidth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Trace Method"], "extent": [19992, 20006], "body": [{"type": "para", "indent": 4, "text": ["Controls how trajectories are traced through the velocity field. Options in\n    this menu are listed in the order of increasing accuracy and computational\n    cost."], "extent": [20031, 20201]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [20201, 20211], "body": [{"type": "para", "indent": 8, "text": ["With an appropriate value for the ", {"type": "ui", "text": ["CFL Condition"]}, ", ", {"type": "ui", "text": ["Forward Euler"]}, "\n        should be sufficient. Consider using a higher-order ", {"type": "ui", "text": ["Trace Method"]}, " if\n        you need to use a larger ", {"type": "ui", "text": ["CFL Condition"]}, " or if you choose to disable\n        that option altogether."], "extent": [20211, 20482]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "adv_tracemethod"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["CFL Condition"], "extent": [20482, 20497], "body": [{"type": "para", "indent": 4, "text": ["When enabled, trajectory tracing will be done in steps to ensure that the\n    calculated path reflects variations in the velocity field. The step size is\n    governed by the value of this parameter. Particularly, the number of field\n    voxels traveled in each step is equal to the ", {"type": "ui", "text": ["CFL Condition"]}, "."], "extent": [20517, 20823]}], "container": true, "attrs": {"id": "adv_usecfl"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Steps"], "extent": [20823, 20834], "body": [{"type": "para", "indent": 4, "text": ["Provides a safety limit on the number of steps that can be taken to trace\n    trajectories."], "extent": [20858, 20955]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [20955, 20965], "body": [{"type": "para", "indent": 8, "text": ["Step limiting will also always apply to velocity advection, even when\n        ", {"type": "ui", "text": ["Use Field Advection Settings for Velocity"]}, " is disabled."], "extent": [20965, 21111]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "adv_limitsteps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Batch Size"], "extent": [21111, 21127], "body": [{"type": "para", "indent": 4, "text": ["To minimize the cost of tracing paths through the ", {"type": "ui", "text": ["Velocity Field"]}, ", the\n    target fields are organized into batches (based on their voxel sampling\n    settings), and each batch is advected simultaneously. Enabling this option\n    allows you to limit the number of fields that can be processed in each\n    batch. This is useful for reducing peak memory usage of the advection step."], "extent": [21151, 21540]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [21540, 21550], "body": [{"type": "para", "indent": 8, "text": ["The batch settings will also always apply to velocity advection, even\n        when ", {"type": "ui", "text": ["Use Field Advection Settings for Velocity"]}, " is disabled."], "extent": [21550, 21701]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "adv_limitbatch"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Extra Fields"], "extent": [21701, 21715], "body": [{"type": "para", "indent": 4, "text": ["By default, the solver will advect ", {"type": "code", "text": ["density"]}, ", ", {"type": "code", "text": ["temperature"]}, ", ", {"type": "code", "text": ["vel"]}, ", and\n    ", {"type": "code", "text": ["flame"]}, " (for pyro only). Additional fields may be advected by specifying\n    them here."], "extent": [21735, 21904]}], "container": true, "attrs": {"id": "adv_extras"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 4, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Velocity Advection"], "extent": [21904, 21933], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Use Field Advection Settings for Velocity"], "extent": [21933, 21977], "body": [{"type": "para", "indent": 4, "text": ["When enabled, ", {"type": "ui", "text": ["Field Advection"]}, " settings will also be used to advect the\n    velocity field. Turning this option off allows you to change advection\n    settings for velocity."], "extent": [22002, 22184]}], "container": true, "attrs": {"id": "adv_vel_usesame"}, "role": "item"}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["The remaining settings in this section are the same as the ones listed under\n", {"type": "ui", "text": ["Field Advection"]}, "."], "extent": [22184, 22283]}]}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Collisions"], "extent": [22283, 22302], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Build Collision Mask"], "extent": [22302, 22325], "body": [{"type": "para", "indent": 4, "text": ["If this option is enabled, the solver will build the ", {"type": "code", "text": ["collision"]}, " and\n    ", {"type": "code", "text": ["collisionvel"]}, " fields, allowing automatic interaction between smoke and\n    collision objects."], "extent": [22348, 22521]}], "container": true, "attrs": {"id": "col_buildmask"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Bandwidth"], "extent": [22521, 22532], "body": [{"type": "para", "indent": 4, "text": ["Controls how far from the collision objects the relevant fields are to be\n    built. This value is measured in voxels. If disabled, the fields will be\n    initialized everywhere."], "extent": [22555, 22739]}], "container": true, "attrs": {"id": "col_bandwidth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Point Velocity for Collisions"], "extent": [22739, 22774], "body": [{"type": "para", "indent": 4, "text": ["The local velocity of an affector object is a combination of the angular and\n    linear velocity. However, if the object is deforming and points match frame\n    to frame, the local point velocity can be used as well to estimate the\n    deformation effect."], "extent": [22804, 23065]}], "container": true, "attrs": {"id": "col_usepointvelocity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Volume Velocity for Collisions"], "extent": [23065, 23101], "body": [{"type": "para", "indent": 4, "text": ["If an affector object doesn\u2019t have a stable point count, but does have a\n    volume representation, the change in the volume representation can be used\n    as an estimate of deformation velocity."], "extent": [23132, 23333]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [23333, 23343], "body": [{"type": "para", "indent": 8, "text": ["This does not include any velocity tangential to the volume surface: a\n        conveyor belt will appear to be stationary as the volume remains\n        unchanged frame to frame."], "extent": [23343, 23530]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "col_usevolumevelocity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Collide with Non-SDF"], "extent": [23530, 23552], "body": [{"type": "para", "indent": 4, "text": ["Normally, the collision relationship uses the signed distance field for each\n    object. However, if the object is a different type you can use other ways of\n    getting its effective signed distance field. If this option is enabled, the\n    object is examined for a ", {"type": "code", "text": ["surface"]}, " scalarfield, which is treated as a signed\n    distance field. If a ", {"type": "code", "text": ["density"]}, " field is present, it is treated as a fog\n    volume with a 0.5 cutoff. If a ", {"type": "code", "text": ["Geometry"]}, " geometry is attached, and it\n    consists of a single volume, that volume will be treated as a fog volume\n    (with cutoff of 0.5). However, if its boundary condition is set to SDF, it\n    will be treated as an SDF."], "extent": [23577, 24239]}], "container": true, "attrs": {"id": "col_allownonsdf"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Correct Collisions"], "extent": [24239, 24259], "body": [{"type": "para", "indent": 4, "text": ["When enabled, the specified fields will be reset inside the colliders."], "extent": [24289, 24365]}], "container": true, "attrs": {"id": "col_correctcollision"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Fields to Correct"], "extent": [24365, 24384], "body": [{"type": "para", "indent": 4, "text": ["These fields will be reset inside the colliders when ", {"type": "ui", "text": ["Correct Collisions"]}, "\n    is turned on."], "extent": [24414, 24513]}], "container": true, "attrs": {"id": "col_correctionfields"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Feedback Scale"], "extent": [24513, 24529], "body": [{"type": "para", "indent": 4, "text": ["The degree to which the colliders are affected by smoke is controlled by the\n    value of this parameter. Higher values will increase the effect of pressure\n    forces on the colliders. A value of 0 will prevent any feedback."], "extent": [24556, 24787]}], "container": true, "attrs": {"id": "col_feedbackscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["IOP Iterations"], "extent": [24787, 24803], "body": [{"type": "para", "indent": 4, "text": ["Colliders are integrated into the system using a weak coupling approach. The\n    number of projection iterations is controlled by this parameter. Larger\n    values will slow down the simulation, but yield better interaction with\n    collision objects."], "extent": [24827, 25084]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [25084, 25094], "body": [{"type": "para", "indent": 8, "text": ["IOP stands for Iterated Orthogonal Projections. This method works by\n        first making the velocity field compatible with colliders (while\n        ignoring the prescribed divergence), then matching the desired\n        divergence (without considering collision objects). If these steps are\n        repeated enough times, the resulting velocity field will have the\n        desired divergence and respect the colliders."], "extent": [25094, 25523]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "col_iterations"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Hourglass Filtering"], "extent": [25523, 25551], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Filter Hourglass Modes"], "extent": [25551, 25576], "body": [{"type": "para", "indent": 4, "text": ["Enables filtering of spurious divergent modes that may survive pressure\n    projection when ", {"type": "ui", "text": ["Velocity Sampling"]}, " on the smoke object is set to\n    ", {"type": "ui", "text": ["Center"]}, "."], "extent": [25600, 25765]}], "container": true, "attrs": {"id": "hfilt_dofilter"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Amount"], "extent": [25765, 25773], "body": [{"type": "para", "indent": 4, "text": ["Strength of hourglass filtering. Value of ", {"type": "code", "text": ["0"]}, " disables the filtering\n    altogether, while ", {"type": "code", "text": ["1"]}, " performs full filtering."], "extent": [1467, 1592]}], "container": true, "attrs": {"id": "hfilt_strength"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Scale by Divergence"], "extent": [25847, 25868], "body": [{"type": "para", "indent": 4, "text": ["Instead of performing the filtering everywhere, it can be selectively\n    applied to voxels where divergence is still detected by turning this option\n    on."], "extent": [1633, 1796]}], "container": true, "attrs": {"id": "hfilt_scalebydiv"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Relative Divergence"], "extent": [25948, 25973], "body": [{"type": "para", "indent": 4, "text": ["Similar to ", {"type": "ui", "text": ["Scale by Divergence"]}, ", this setting applies the filtering with\n    different strength in different places. Instead of pure divergence, however,\n    the quantity used to control filtering strength is the ratio of divergence\n    to speed."], "extent": [1842, 2097]}], "container": true, "attrs": {"id": "hfilt_scalebyreldiv"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Divergence Scale"], "extent": [26057, 26075], "body": [{"type": "para", "indent": 4, "text": ["Controls how sensitive filter strength is to the remaining divergence (or\n    divergence relative to speed if ", {"type": "ui", "text": ["Use Relative Divergence"]}, " is enabled).\n    That is, the relevant quantity is multiplied by this amount before it is\n    used to determine filter strength."], "extent": [2133, 2405]}], "container": true, "attrs": {"id": "hfilt_divscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Visualize Filter Strength"], "extent": [26151, 26178], "body": [{"type": "para", "indent": 4, "text": ["When using an adaptive filter (", {"type": "ui", "text": ["Scale by Divergence"]}, " turned on), the\n    strength field can be visualized by enabling this option."], "extent": [26203, 26341]}], "container": true, "attrs": {"id": "hfilt_visualize"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plane Orientation"], "extent": [26341, 26360], "body": [{"type": "para", "indent": 4, "text": ["Orientation of the cutting plane for visualization."], "extent": [26386, 26443]}], "container": true, "attrs": {"id": "hfilt_guideplane"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plane Position"], "extent": [26443, 26459], "body": [{"type": "para", "indent": 4, "text": ["Relative position of the cutting plane inside the bounding box."], "extent": [26488, 26557]}], "container": true, "attrs": {"id": "hfilt_guideplaneval"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Visualization Mode"], "extent": [26557, 26577], "body": [{"type": "para", "indent": 4, "text": ["Determines how strength values (which fall between ", {"type": "code", "text": ["0"]}, " and ", {"type": "code", "text": ["1"]}, ") are\n    converted to colors."], "extent": [26605, 26703]}], "container": true, "attrs": {"id": "hfilt_guidevismode"}, "role": "item"}], "container": true, "role": "item_group"}]}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [26703, 26712], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": null, "value": "/pyro/pyro", "type": "link", "text": ["Pyro Effects"], "fullpath": "/pyro/pyro.html"}], "extent": [26712, 26741]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/smokeobject_sparse", "type": "link", "text": ["Smoke Object (Sparse)"], "fullpath": "/nodes/dop/smokeobject_sparse.html"}], "extent": [26741, 26795]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/pyrosolver_sparse", "type": "link", "text": ["Pyro Solver (Sparse)"], "fullpath": "/nodes/dop/pyrosolver_sparse.html"}], "extent": [26795, 26848]}], "container": true}], "text": "Related"}], "title": ["Smoke Solver (Sparse)"], "summary": ["Performs a sparse smoke simulation on the given object. This is a slightly\nlower-level solver that is the basis for the sparse pyro solver."], "included": ["/nodes/dop/gasfilterhourglassmodes", "/nodes/dop/standard_data_locals", "/nodes/dop/standard_data_outputs", "/nodes/dop/standard_gas_stencil", "/nodes/dop/standard_locals", "/nodes/dop/standard_microsolver_inputs"]}